<% provide(:title, "Users") %>

<div class="col-md-6">

<p id="notice"><%= notice %></p>

<h1>Users list</h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Nickname</th>
      <th>Registrations</th>
      <th>Followers</th>
      <th>Followees</th>
      <th>Subscribe</th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= link_to user.nickname, user.profile %></td>
        <td><%=link_to user.races.count, race_register_list_races_path(:user => user) %></td>
        <td><%= link_to user.followers_count, users_list_followers_path(:user => user) %></td>
        <td><%= link_to user.follow_count, users_list_followees_path(:user => user) %></td>
        <% if user_signed_in? && current_user.following?(user) %>
        <td><%= link_to 'Unfollow', users_unfollow_path(:user => user) %></td>
        <% else %>
        <td><%= link_to 'Follow', users_follow_path(:user => user) %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<div class="col-md-8">